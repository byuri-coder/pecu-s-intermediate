{
  "entities": {
    "UserProfile": {
      "title": "User Profile",
      "description": "Represents a user's profile information.",
      "type": "object",
      "properties": {
        "email": {
          "type": "string",
          "format": "email",
          "description": "The user's email address."
        },
        "displayName": {
          "type": "string",
          "description": "The user's display name."
        },
        "createdAt": {
          "type": "string",
          "format": "date-time",
          "description": "The timestamp when the user profile was created."
        }
      },
      "required": ["email", "createdAt"]
    },
    "Asset": {
      "title": "Asset",
      "description": "Represents a generic asset listed by a user.",
      "type": "object",
      "properties": {
        "type": {
          "type": "string",
          "enum": ["carbon-credit", "tax-credit", "rural-land"],
          "description": "The type of the asset."
        },
        "details": {
          "type": "object",
          "description": "The specific details of the asset."
        },
        "createdAt": {
          "type": "string",
          "format": "date-time"
        },
        "status": {
          "type": "string",
          "enum": ["available", "in-negotiation", "sold"],
          "description": "The current status of the asset."
        }
      },
      "required": ["type", "details", "createdAt", "status"]
    },
    "Contract": {
      "title": "Contract",
      "description": "Represents a negotiation contract between users.",
      "type": "object",
      "properties": {
        "assetId": {
          "type": "string",
          "description": "The ID of the asset being negotiated."
        },
        "buyerId": {
          "type": "string",
          "description": "The UID of the buyer."
        },
        "sellerId": {
          "type": "string",
          "description": "The UID of the seller."
        },
        "status": {
          "type": "string",
          "enum": ["draft", "signed", "completed", "cancelled"],
          "description": "The status of the contract."
        },
        "createdAt": {
          "type": "string",
          "format": "date-time"
        },
        "updatedAt": {
          "type": "string",
          "format": "date-time"
        }
      },
      "required": ["assetId", "buyerId", "sellerId", "status", "createdAt"]
    },
    "AuditLog": {
      "title": "Audit Log",
      "description": "Represents an audit log entry for a user's actions.",
      "type": "object",
      "properties": {
        "action": {
          "type": "string",
          "description": "The action performed by the user."
        },
        "timestamp": {
          "type": "string",
          "format": "date-time",
          "description": "The timestamp of the action."
        },
        "details": {
          "type": "object",
          "description": "Additional details about the audit event."
        }
      },
      "required": ["action", "timestamp"]
    },
    "Negotiation": {
      "title": "Negotiation",
      "description": "Represents the state of a negotiation for an asset.",
      "type": "object",
      "properties": {
        "assetId": { "type": "string" },
        "assetType": { "type": "string" },
        "sellerId": { "type": "string" },
        "buyerId": { "type": "string" },
        "sellerEmail": { "type": "string" },
        "buyerEmail": { "type": "string" },
        "sellerAgrees": { "type": "boolean" },
        "buyerAgrees": { "type": "boolean" },
        "isFinalized": { "type": "boolean" },
        "isTransactionComplete": { "type": "boolean" },
        "paymentMethod": { "type": "string", "enum": ["vista", "parcelado"] },
        "numberOfInstallments": { "type": "string" },
        "authStatus": {
          "type": "object",
          "properties": {
            "buyer": { "type": "string", "enum": ["pending", "validated", "expired"] },
            "seller": { "type": "string", "enum": ["pending", "validated", "expired"] }
          }
        },
        "contractFields": {
          "type": "object"
        }
      }
    }
  },
  "auth": {
    "providers": ["email"]
  },
  "firestore": {
    "/usuarios/{userId}": {
      "schema": {
        "$ref": "#/entities/UserProfile"
      },
      "description": "Stores public profile information for each user, identified by their email."
    },
    "/usuarios/{userId}/ativos/{assetId}": {
      "schema": {
        "$ref": "#/entities/Asset"
      },
      "description": "Subcollection for assets listed by a specific user."
    },
    "/usuarios/{userId}/contratos/{contractId}": {
      "schema": {
        "$ref": "#/entities/Contract"
      },
      "description": "Subcollection for contracts related to a user."
    },
    "/usuarios/{userId}/auditoria/{logId}": {
      "schema": {
        "$ref": "#/entities/AuditLog"
      },
      "description": "Subcollection for audit trail entries for a user."
    },
    "/negociacoes/{negotiationId}": {
      "schema": {
        "$ref": "#/entities/Negotiation"
      },
      "description": "Stores the state of a negotiation for an asset."
    }
  }
}
